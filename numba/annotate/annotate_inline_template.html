<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<style>

.meta {
padding: 10px;
}

.annotation_table {
float: left;
margin-right: 10px;
border-collapse: collapse;
color: #ffffff;
background-color: #666666;
font-family: monospace;
}

.linenum {
padding-left: 10px;
padding-right: 10px;
}

.firstline {
padding-top: 10px;
}

.lastline {
padding-bottom: 10px;
}

.python_code {
padding-left: 10px;
padding-right: 10px;
white-space: pre;
}

.llvm_code {
padding-left: 10px;
padding-right: 10px;
padding-top: 10px;
padding-bottom: 10px;
white-space: pre;
}

.line {
border:1px solid #666666;
}

.python_line {
display: table-row;
}

.llvm_line {
display: none;
background-color: #999999;
}

.color0 {
color: #ffffff;
}

.color1 {
color: #ffffcc;
}

.color2 {
color: #ffcc99;
}

.color3 {
color: #ff9966;
}

.color4 {
color: ff6666;
}

</style>

 <script>

$(function() {
    $( document ).tooltip({
        position: { my: "left", at: "left bottom+20" }
    });
});

$(document).ready(function() {

    $(".python_line").click(function() {
        var this_id = "." + $(this).attr("class").split(" ")[0];
        var llvm_element = $(this_id + ".llvm_line");
        if (llvm_element.css("display") == "none") {
            llvm_element.css("display", "table-row");
            $(this).children(".python_code, .linenum").css("padding-bottom", "10px");
            var temp = $(this).next().children();
            $(this).next().next().children(".python_code, .linenum").css("padding-top", "10px");
        }
        else {
            llvm_element.css("display", "none");
            if ($(this).children(".python_code, linenum").attr("class").indexOf("lastline") == -1) {
                $(this).children(".python_code, .linenum").css("padding-bottom", "1px");
                $(this).next().next().children(".python_code, .linenum").css("padding-top", "1px");
            }
        }
     });

     $(".python_line").mouseover(function() {
        $(this).css("background-color", "#999999");
     });

     $(".python_line").mouseout(function() {
        $(this).css("background-color", "#666666");
     });
});

</script>

</head>

<body>

<div class="meta">${func_call}<br/>${func_call_filename}:${func_call_lineno}</div>

<table class="annotation_table">
    %for line in lines:
    <tr class="id${line['num']} line python_line color${line['colorlevel']}"><td class="linenum ${line['firstlastline']}">${line['num']}</td><td class="python_code ${line['firstlastline']}" title="${line['types']}">${line['python_source']}</td></tr>
    <tr class="id${line['num']} line llvm_line"><td>&nbsp;</td><td class="llvm_code">${line['llvm_source']}</td></tr>
    %endfor
</table>

</body>

</html>
